const be=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}};be();const _={};function he(e){_.context=e}const pe=(e,t)=>e===t,me=Symbol("solid-track"),U={equals:pe};let se=ce;const L={},A=1,F=2,le={owned:null,cleanups:null,context:null,owner:null};var h=null;let P=null,b=null,D=null,p=null,$=null,W=0;function R(e,t){const r=b,n=h,i=e.length===0,o=i?le:{owned:null,cleanups:null,context:null,owner:t||n},s=i?e:()=>e(()=>Z(o));h=o,b=null;try{return Y(s,!0)}finally{b=r,h=n}}function C(e,t){t=t?Object.assign({},U,t):U;const r={value:e,observers:null,observerSlots:null,pending:L,comparator:t.equals||void 0},n=i=>(typeof i=="function"&&(i=i(r.pending!==L?r.pending:r.value)),Q(r,i));return[ae.bind(r),n]}function E(e,t,r){const n=X(e,t,!1,A);j(n)}function xe(e,t,r){se=$e;const n=X(e,t,!1,A);n.user=!0,$?$.push(n):j(n)}function J(e,t,r){r=r?Object.assign({},U,r):U;const n=X(e,t,!0,0);return n.pending=L,n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,j(n),ae.bind(n)}function ye(e){if(D)return e();let t;const r=D=[];try{t=e()}finally{D=null}return Y(()=>{for(let n=0;n<r.length;n+=1){const i=r[n];if(i.pending!==L){const o=i.pending;i.pending=L,Q(i,o)}}},!1),t}function H(e){let t,r=b;return b=null,t=e(),b=r,t}function ve(e){return h===null||(h.cleanups===null?h.cleanups=[e]:h.cleanups.push(e)),e}function ae(){const e=P;if(this.sources&&(this.state||e)){const t=p;p=null,this.state===A||e?j(this):q(this),p=t}if(b){const t=this.observers?this.observers.length:0;b.sources?(b.sources.push(this),b.sourceSlots.push(t)):(b.sources=[this],b.sourceSlots=[t]),this.observers?(this.observers.push(b),this.observerSlots.push(b.sources.length-1)):(this.observers=[b],this.observerSlots=[b.sources.length-1])}return this.value}function Q(e,t,r){if(D)return e.pending===L&&D.push(e),e.pending=t,t;if(e.comparator&&e.comparator(e.value,t))return t;let n=!1;return e.value=t,e.observers&&e.observers.length&&Y(()=>{for(let i=0;i<e.observers.length;i+=1){const o=e.observers[i];n&&P.disposed.has(o),(n&&!o.tState||!n&&!o.state)&&(o.pure?p.push(o):$.push(o),o.observers&&de(o)),n||(o.state=A)}if(p.length>1e6)throw p=[],new Error},!1),t}function j(e){if(!e.fn)return;Z(e);const t=h,r=b,n=W;b=h=e,ke(e,e.value,n),b=r,h=t}function ke(e,t,r){let n;try{n=e.fn(t)}catch(i){ue(i)}(!e.updatedAt||e.updatedAt<=r)&&(e.observers&&e.observers.length?Q(e,n):e.value=n,e.updatedAt=r)}function X(e,t,r,n=A,i){const o={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:h,context:null,pure:r};return h===null||h!==le&&(h.owned?h.owned.push(o):h.owned=[o]),o}function I(e){const t=P;if(e.state===0||t)return;if(e.state===F||t)return q(e);if(e.suspense&&H(e.suspense.inFallback))return e.suspense.effects.push(e);const r=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<W);)(e.state||t)&&r.push(e);for(let n=r.length-1;n>=0;n--)if(e=r[n],e.state===A||t)j(e);else if(e.state===F||t){const i=p;p=null,q(e,r[0]),p=i}}function Y(e,t){if(p)return e();let r=!1;t||(p=[]),$?r=!0:$=[],W++;try{const n=e();return Se(r),n}catch(n){ue(n)}finally{p=null,r||($=null)}}function Se(e){p&&(ce(p),p=null),!e&&($.length?ye(()=>{se($),$=null}):$=null)}function ce(e){for(let t=0;t<e.length;t++)I(e[t])}function $e(e){let t,r=0;for(t=0;t<e.length;t++){const i=e[t];i.user?e[r++]=i:I(i)}_.context&&he();const n=e.length;for(t=0;t<r;t++)I(e[t]);for(t=n;t<e.length;t++)I(e[t])}function q(e,t){const r=P;e.state=0;for(let n=0;n<e.sources.length;n+=1){const i=e.sources[n];i.sources&&(i.state===A||r?i!==t&&I(i):(i.state===F||r)&&q(i,t))}}function de(e){const t=P;for(let r=0;r<e.observers.length;r+=1){const n=e.observers[r];(!n.state||t)&&(n.state=F,n.pure?p.push(n):$.push(n),n.observers&&de(n))}}function Z(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),n=e.sourceSlots.pop(),i=r.observers;if(i&&i.length){const o=i.pop(),s=r.observerSlots.pop();n<i.length&&(o.sourceSlots[s]=n,i[n]=o,r.observerSlots[n]=s)}}if(e.owned){for(t=0;t<e.owned.length;t++)Z(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function ue(e){throw e}const Ce=Symbol("fallback");function re(e){for(let t=0;t<e.length;t++)e[t]()}function _e(e,t,r={}){let n=[],i=[],o=[],s=0,l=t.length>1?[]:null;return ve(()=>re(o)),()=>{let c=e()||[],d,a;return c[me],H(()=>{let u=c.length,f,m,x,N,O,y,v,w,k;if(u===0)s!==0&&(re(o),o=[],n=[],i=[],s=0,l&&(l=[])),r.fallback&&(n=[Ce],i[0]=R(B=>(o[0]=B,r.fallback())),s=1);else if(s===0){for(i=new Array(u),a=0;a<u;a++)n[a]=c[a],i[a]=R(g);s=u}else{for(x=new Array(u),N=new Array(u),l&&(O=new Array(u)),y=0,v=Math.min(s,u);y<v&&n[y]===c[y];y++);for(v=s-1,w=u-1;v>=y&&w>=y&&n[v]===c[w];v--,w--)x[w]=i[v],N[w]=o[v],l&&(O[w]=l[v]);for(f=new Map,m=new Array(w+1),a=w;a>=y;a--)k=c[a],d=f.get(k),m[a]=d===void 0?-1:d,f.set(k,a);for(d=y;d<=v;d++)k=n[d],a=f.get(k),a!==void 0&&a!==-1?(x[a]=i[d],N[a]=o[d],l&&(O[a]=l[d]),a=m[a],f.set(k,a)):o[d]();for(a=y;a<u;a++)a in x?(i[a]=x[a],o[a]=N[a],l&&(l[a]=O[a],l[a](a))):i[a]=R(g);i=i.slice(0,s=u),n=c.slice(0)}return i});function g(u){if(o[a]=u,l){const[f,m]=C(a);return l[a]=m,t(c[a],f)}return t(c[a])}}}function z(e,t){return H(()=>e(t||{}))}function fe(e){const t="fallback"in e&&{fallback:()=>e.fallback};return J(_e(()=>e.each,e.children,t||void 0))}function Ne(e){let t=!1;const r=J(()=>e.when,void 0,{equals:(n,i)=>t?n===i:!n==!i});return J(()=>{const n=r();if(n){const i=e.children;return(t=typeof i=="function"&&i.length>0)?H(()=>i(n)):i}return e.fallback})}function ze(e,t,r){let n=r.length,i=t.length,o=n,s=0,l=0,c=t[i-1].nextSibling,d=null;for(;s<i||l<o;){if(t[s]===r[l]){s++,l++;continue}for(;t[i-1]===r[o-1];)i--,o--;if(i===s){const a=o<n?l?r[l-1].nextSibling:r[o-l]:c;for(;l<o;)e.insertBefore(r[l++],a)}else if(o===l)for(;s<i;)(!d||!d.has(t[s]))&&t[s].remove(),s++;else if(t[s]===r[o-1]&&r[l]===t[i-1]){const a=t[--i].nextSibling;e.insertBefore(r[l++],t[s++].nextSibling),e.insertBefore(r[--o],a),t[i]=r[o]}else{if(!d){d=new Map;let g=l;for(;g<o;)d.set(r[g],g++)}const a=d.get(t[s]);if(a!=null)if(l<a&&a<o){let g=s,u=1,f;for(;++g<i&&g<o&&!((f=d.get(t[g]))==null||f!==a+u);)u++;if(u>a-l){const m=t[s];for(;l<a;)e.insertBefore(r[l++],m)}else e.replaceChild(r[l++],t[s++])}else s++;else t[s++].remove()}}}const ne="_$DX_DELEGATE";function Ee(e,t,r){let n;return R(i=>{n=i,t===document?e():S(t,e(),t.firstChild?null:void 0,r)}),()=>{n(),t.textContent=""}}function M(e,t,r){const n=document.createElement("template");n.innerHTML=e;let i=n.content.firstChild;return r&&(i=i.firstChild),i}function ee(e,t=window.document){const r=t[ne]||(t[ne]=new Set);for(let n=0,i=e.length;n<i;n++){const o=e[n];r.has(o)||(r.add(o),t.addEventListener(o,Ae))}}function ie(e,t){t==null?e.removeAttribute("class"):e.className=t}function S(e,t,r,n){if(r!==void 0&&!n&&(n=[]),typeof t!="function")return G(e,t,n,r);E(i=>G(e,t(),i,r),n)}function Ae(e){const t=`$$${e.type}`;let r=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==r&&Object.defineProperty(e,"target",{configurable:!0,value:r}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return r||document}}),_.registry&&!_.done&&(_.done=!0,document.querySelectorAll("[id^=pl-]").forEach(n=>n.remove()));r!==null;){const n=r[t];if(n&&!r.disabled){const i=r[`${t}Data`];if(i!==void 0?n.call(r,i,e):n.call(r,e),e.cancelBubble)return}r=r.host&&r.host!==r&&r.host instanceof Node?r.host:r.parentNode}}function G(e,t,r,n,i){for(_.context&&!r&&(r=[...e.childNodes]);typeof r=="function";)r=r();if(t===r)return r;const o=typeof t,s=n!==void 0;if(e=s&&r[0]&&r[0].parentNode||e,o==="string"||o==="number"){if(_.context)return r;if(o==="number"&&(t=t.toString()),s){let l=r[0];l&&l.nodeType===3?l.data=t:l=document.createTextNode(t),r=T(e,r,n,l)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t}else if(t==null||o==="boolean"){if(_.context)return r;r=T(e,r,n)}else{if(o==="function")return E(()=>{let l=t();for(;typeof l=="function";)l=l();r=G(e,l,r,n)}),()=>r;if(Array.isArray(t)){const l=[];if(K(l,t,i))return E(()=>r=G(e,l,r,n,!0)),()=>r;if(_.context){for(let c=0;c<l.length;c++)if(l[c].parentNode)return r=l}if(l.length===0){if(r=T(e,r,n),s)return r}else Array.isArray(r)?r.length===0?oe(e,l,n):ze(e,r,l):(r&&T(e),oe(e,l));r=l}else if(t instanceof Node){if(_.context&&t.parentNode)return r=s?[t]:t;if(Array.isArray(r)){if(s)return r=T(e,r,n,t);T(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}}return r}function K(e,t,r){let n=!1;for(let i=0,o=t.length;i<o;i++){let s=t[i],l;if(s instanceof Node)e.push(s);else if(!(s==null||s===!0||s===!1))if(Array.isArray(s))n=K(e,s)||n;else if((l=typeof s)=="string")e.push(document.createTextNode(s));else if(l==="function")if(r){for(;typeof s=="function";)s=s();n=K(e,Array.isArray(s)?s:[s])||n}else e.push(s),n=!0;else e.push(document.createTextNode(s.toString()))}return n}function oe(e,t,r){for(let n=0,i=t.length;n<i;n++)e.insertBefore(t[n],r)}function T(e,t,r,n){if(r===void 0)return e.textContent="";const i=n||document.createTextNode("");if(t.length){let o=!1;for(let s=t.length-1;s>=0;s--){const l=t[s];if(i!==l){const c=l.parentNode===e;!o&&!s?c?e.replaceChild(i,l):e.insertBefore(i,r):c&&l.remove()}else o=!0}}else e.insertBefore(i,r);return[i]}var V=new WebSocket("wss://nebulii.herokuapp.com");const Oe=M('<div class="max-w-full mb-4 break-all"><span class="mr-2 px-2 py-1 rounded bg-gray-800"></span></div>'),Te=e=>(()=>{const t=Oe.cloneNode(!0),r=t.firstChild;return S(r,()=>e.data.author),S(t,()=>e.data.content,null),t})(),Le=M('<div class="w-full flex flex-col"><div class="w-full h-12 flex border-b-4 border-gray-800"><div class="m-auto text-2xl font-cursive"></div></div><div class="w-full p-4 flex-grow overflow-y-scroll"></div><form class="w-full p-4 flex gap-4"><div class="h-10 px-3 flex rounded-lg bg-sky-900"><div class="m-auto"></div></div><input class="h-10 p-3 flex-grow" placeholder="say something..."><button class="w-10 h-10 bg-blue-900">\u2708\uFE0F</button></form></div>'),Me=e=>{const[t,r]=C("");let n;return document.onkeydown=()=>{document.activeElement?.tagName!=="INPUT"&&n.focus()},(()=>{const i=Le.cloneNode(!0),o=i.firstChild,s=o.firstChild,l=o.nextSibling,c=l.nextSibling,d=c.firstChild,a=d.firstChild,g=d.nextSibling;S(s,()=>e.currentSpace),S(l,z(fe,{get each(){return e.messages},children:f=>z(Te,{data:f})})),c.addEventListener("submit",f=>{f.preventDefault(),t()!==""&&(V.send(JSON.stringify({action:"send-message",author:e.name,content:t()})),r(""))}),S(a,()=>e.name);const u=n;return typeof u=="function"?u(g):n=g,g.$$input=f=>r(f.currentTarget.value),E(()=>g.value=t()),i})()};ee(["input"]);const De=M('<div class="h-full flex"><div class="m-auto"><div class="w-full text-center text-6xl font-cursive">nebulii</div><div class="h-8"></div><form><input class="h-12 p-4 text-center" placeholder="name"><div class="h-4"></div><button class="w-full h-10 text-center bg-blue-900">enter</button></form></div></div>'),Ie=e=>(()=>{const t=De.cloneNode(!0),r=t.firstChild,n=r.firstChild,i=n.nextSibling,o=i.nextSibling,s=o.firstChild;return o.addEventListener("submit",l=>{l.preventDefault(),e.name!==""&&e.setEntered(!0)}),s.$$input=l=>e.setName(l.currentTarget.value),E(()=>s.value=e.name),t})();ee(["input"]);const Pe=M('<aside class="w-64 h-full flex flex-col border-r-4 border-gray-800"><div><button class="w-full p-2 text-4xl font-cursive">nebulii</button></div><div class="w-full h-1 m-auto mb-4 bg-gray-800"></div><div class="flex-grow overflow-y-scroll"></div><form><input class="h-10 mx-4 mt-4 p-3 rounded-b-none text-center" placeholder="space id" maxlength="8"><div class="mx-4 rounded-b-lg bg-emerald-800"><button class="w-full">enter</button></div></form><div class="mx-4 mt-4 rounded-t-lg text-center bg-gray-800">online</div><div class="h-8 mx-4 mb-4 flex"><div class="w-1/2 rounded-bl-lg bg-blue-900"><div class="absolute w-8 h-8 flex"><div class="m-auto">\u{1F30E}</div></div><div class="h-full flex"><div class="m-auto"></div></div></div><div class="w-1/2 rounded-br-lg text-center bg-sky-900"><div class="absolute w-8 h-8 flex"><div class="m-auto">\u{1F3E0}</div></div><div class="h-full flex"><div class="m-auto"></div></div></div></div></aside>'),je=M('<div><button class="absolute w-10 h-10 rounded-r-none">\u274C</button><button class="w-full h-full"></button></div>'),Be=e=>{const[t,r]=C("");return(()=>{const n=Pe.cloneNode(!0),i=n.firstChild,o=i.firstChild,s=i.nextSibling,l=s.nextSibling,c=l.nextSibling,d=c.firstChild,a=c.nextSibling,g=a.nextSibling,u=g.firstChild,f=u.firstChild,m=f.nextSibling,x=m.firstChild,N=u.nextSibling,O=N.firstChild,y=O.nextSibling,v=y.firstChild;return o.$$click=()=>e.setCurrentSpace("core"),S(l,z(fe,{get each(){return e.spaces},children:w=>(()=>{const k=je.cloneNode(!0),B=k.firstChild,te=B.nextSibling;return B.$$click=()=>{e.setSpaces(ge=>ge.filter(we=>we!==w)),w===e.currentSpace&&e.setCurrentSpace("core")},te.$$click=()=>e.setCurrentSpace(w),S(te,w),E(()=>ie(k,`h-10 mx-4 mb-4 rounded-lg ${w===e.currentSpace?"bg-indigo-900":"bg-gray-800"}`)),k})()})),c.addEventListener("submit",w=>{w.preventDefault(),t()!==""&&(!e.spaces.includes(t())&&t()!=="core"&&e.setSpaces(k=>[...k,t()]),e.setCurrentSpace(t()),r(""))}),d.$$input=w=>r(w.currentTarget.value),S(x,()=>e.serverOnlineCount),S(v,()=>e.roomOnlineCount),E(()=>ie(i,`m-4 rounded-lg ${e.currentSpace==="core"?"bg-indigo-900":"bg-gray-800"}`)),E(()=>d.value=t()),n})()};ee(["click","input"]);const Re=M('<div class="h-full flex"></div>'),Ue=()=>{const[e,t]=C(""),[r,n]=C(!1),[i,o]=C([]),[s,l]=C([]),[c,d]=C("core"),[a,g]=C(0),[u,f]=C(0);return V.onmessage=m=>{const x=JSON.parse(m.data);switch(x.action){case"send-message":o(N=>[...N,x]);break;case"server-update-count":g(parseInt(x.content));break;case"room-update-count":f(parseInt(x.content));break}},xe(()=>{V.send(JSON.stringify({action:"join-room",author:"",content:c()})),o([])}),z(Ne,{get when(){return r()},get fallback(){return z(Ie,{get name(){return e()},setName:t,setEntered:n})},get children(){const m=Re.cloneNode(!0);return S(m,z(Be,{get spaces(){return s()},setSpaces:l,get currentSpace(){return c()},setCurrentSpace:d,get serverOnlineCount(){return a()},get roomOnlineCount(){return u()}}),null),S(m,z(Me,{get name(){return e()},get messages(){return i()},get currentSpace(){return c()}}),null),m}})};Ee(()=>z(Ue,{}),document.getElementById("root"));
